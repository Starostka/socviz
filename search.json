[
  {
    "objectID": "story.html",
    "href": "story.html",
    "title": "Storyline",
    "section": "",
    "text": "import folium\nimport pandas as pd\nimport polars as pl\nimport pandas as pd\nfrom bokeh.io import output_notebook\nfrom bokeh.models import ColumnDataSource\nfrom bokeh.plotting import figure, show\nfrom bokeh.sampledata.commits import data\nfrom bokeh.transform import jitter\nfrom bokeh.palettes import HighContrast3\nfrom bokeh.plotting import figure, show\nfrom bokeh.io import show\nfrom bokeh.layouts import row, column\nfrom bokeh.models import CustomJS, RadioButtonGroup\nfrom bokeh.models import TabPanel, Tabs\nfrom bokeh.plotting import figure, show\nfrom bokeh.io import show\nfrom bokeh.models import Paragraph\nfrom folium.plugins import HeatMap\nfrom folium.plugins import HeatMap\n\n# Configure for output in the notebook\noutput_notebook()\n\n\n    \n        \n        Loading BokehJS ..."
  },
  {
    "objectID": "story.html#dataset",
    "href": "story.html#dataset",
    "title": "Storyline",
    "section": "Dataset",
    "text": "Dataset\nIn this story, we will explore the San Francisco Police Department’s (SFPD) Incient Report Dataset with the time frame from January 2003 to May 2018.\nThis dataset is a collection of data on criminal incidents reported in SF, which provides the information of incident date, incident time, incident category, police district, latitude, logitude, etc. The dataset contains 35 columns and more than 2 million records of crimes within the timeframe. According to the data, there were 37 categories of crimes recorded across San Francisco city."
  },
  {
    "objectID": "story.html#abstract",
    "href": "story.html#abstract",
    "title": "Storyline",
    "section": "Abstract",
    "text": "Abstract\nThe aim of this report is utilizing the techniques of data visualization for the analytics of crime occured in San Francisco. The primary idea of this data analysis study is to obtain the insights from the observation, in order to evaluate the criminal situation for the past decades in San Francisco, as well as help prevent potential crimes in the future. The data analysis will be based on Time-Series, Geographic and Interative Visualization respectively.\nAccording to SFNext Index, with the exception of robberies, violent crime in San Francisco is below average for large cities. In 2019 and 2020, San Francisco ranked in the bottom half among major U.S. cities, with rates of 670 and 540 violent crime incidents per 100,000 residents, respectively. Hence, we are interested in how Robbery had increased the violent crime level in San Francisco."
  },
  {
    "objectID": "story.html#timeseries-how-the-occurrence-of-robbery-changed-over-the-time",
    "href": "story.html#timeseries-how-the-occurrence-of-robbery-changed-over-the-time",
    "title": "Storyline",
    "section": "Timeseries: How the occurrence of Robbery changed over the time?",
    "text": "Timeseries: How the occurrence of Robbery changed over the time?\n\nIf we divide the time of the incidents into hourly timeslots, it becomes apparent that the number of robberies reaches its highest point between 2 and 3 pm and remains consistently high until 5 pm. After 5 pm, there is a sharp decline during the evening, but a secondary peak occurs between 1 and 2 am.Between 2 am and 2 pm, the number of incidents increases steadily.\nFrom a 2003 to 2017, we can see the incidents fluctuated accross years. Specifically, in 2010 and 2011, it has a significant decreased from 2008 and 2009. The Rand Corporation studied this phenomenon on a national level in 2010, concluding that the crime prevention benefit of hiring more officers is well worth the cost. Reference\nHowever, there was a resurgence in incidents in 2012, with a noticeable gap from the previous year. After analyzing the robbery incidents data in 2012, we observed a marked increase in robberies on the final Sunday in June in San Francisco. Further investigation revealed that this date coincided with the San Francisco LGBT Pride Parade, which started at Beale Street and Market Street and continued down to 8th Street."
  },
  {
    "objectID": "story.html#map-where-does-robbery-most-likely-take-place",
    "href": "story.html#map-where-does-robbery-most-likely-take-place",
    "title": "Storyline",
    "section": "Map: Where does robbery most likely take place?",
    "text": "Map: Where does robbery most likely take place?\n\nLet’s examine the robbery locations on June 24, 2012, during the Pride Parade in San Francisco which typically occurs on Market Street(Reference: Wikipedia).\n\n\n# df_before_2018 = pd.read_csv('data/Police_Department_Incident_Reports__Historical_2003_to_May_2018.csv')\n# df_before_2018['Date'] = pd.to_datetime(df_before_2018['Date'])\n# df_before_2018['Year'] = df_before_2018['Date'].dt.year\n# df_before_2018['Month'] = df_before_2018['Date'].dt.month\n# df_before_2018['Hour'] = pd.DatetimeIndex(df_before_2018['Time']).hour\n# df_before_2018 = df_before_2018.loc[df_before_2018['Year'] != 2018]\n\n# << uses pre-transformed instead of above\ndf_before_2018 = pl.read_csv('before_2018.csv').to_pandas()\n\ndf_robbery = df_before_2018.loc[df_before_2018['Category']==\"ROBBERY\"]\ndf_robbery = df_robbery[df_robbery[\"Year\"] == 2012]\ndf_robbery_pride = df_robbery[df_robbery['Date'] == '2012-6-24']\nget_XY = list(zip(list(df_robbery_pride[\"Y\"]), list(df_robbery_pride[\"X\"])))\n\nSF_map = folium.Map([37.77919, -122.41914], zoom_start=13, tiles = \"openstreetmap\")\nfolium.Marker([37.77351584799628, -122.42148577465927], popup=\"Market Street\").add_to(SF_map)\nfolium.Marker([37.78907067508782, -122.3929690574588], popup=\"Beala Street\").add_to(SF_map)\nfolium.Marker([37.77295458293956, -122.40701151351163], popup='8th Street').add_to(SF_map)\n\nfor x,y in get_XY:\n    folium.CircleMarker([x, y],\n                    radius=2,\n                    color='red',\n                    ).add_to(SF_map)\nSF_map\n\nMake this Notebook Trusted to load map: File -> Trust Notebook\n\n\nThe incidence of robbery is relatively high in the vicinity of Market Street, indicating that criminals are more prone to commit robbery in crowded areas, thus increasing their chances of escape. Additionally, the buildings and blocks in the Market Street area are more densely packed, offering additional cover and refuge for criminals.\nThis observation also aligns with the result of the heatmap regarding robbery in San Francisco. It reveals the fact that areas with a high concentration of stores and a large population, along with a complex urban infrastructure, are more susceptible to robbery incidents.\nCluster Correlation idea: Furthermore, we can select two clusters and a little info box pops up over the cursor printing the correlation between the two clusters."
  },
  {
    "objectID": "story.html#filtering-selecting-for-group-drunkiness",
    "href": "story.html#filtering-selecting-for-group-drunkiness",
    "title": "Storyline",
    "section": "Filtering, selecting for group (drunkiness)",
    "text": "Filtering, selecting for group (drunkiness)\n\ndataset = pl.read_csv('before_2018.csv')\n\ndata = (\n    dataset\n    .filter(pl.col('Category') == 'ROBBERY')\n    .groupby('Year').agg(pl.count())\n).to_pandas()\np1 = figure(width=600, height=300, title=\"Robbery incidents\")\np1.xgrid.grid_line_color = None\np1.xaxis.ticker = sorted(data['Year'].to_list())\np1.vbar(x=data['Year'], top=data['count'], width=0.9, alpha=0.4)\npar1 = Paragraph(text=f\"\"\"\n    Mean incident count: {data['count'].mean():3.2f}\n    \"\"\",\n    width=600, height=50)\ntab1 = TabPanel(child=column(par1, p1), title=\"ROBBERY\")\n\ndata = (\n    dataset\n    .filter(pl.col('Category') == 'WARRANTS')\n    .groupby('Year').agg(pl.count())\n).to_pandas()\np2 = figure(width=600, height=300, title=\"Warrant incidents\")\np2.xgrid.grid_line_color = None\np2.xaxis.ticker = sorted(data['Year'].to_list())\np2.vbar(x=data['Year'], top=data['count'], width=0.9, alpha=0.4)\npar2 = Paragraph(text=f\"\"\"\n    Mean incident count: {data['count'].mean():3.2f}\n    \"\"\",\n    width=600, height=50)\ntab2 = TabPanel(child=column(par2, p1), title=\"WARRANTS\")\n\nshow(Tabs(tabs=[tab1, tab2]))"
  }
]